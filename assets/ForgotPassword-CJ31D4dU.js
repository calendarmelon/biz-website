import{j as s,C,N as P,i as w}from"./index-BheFCFOF.js";import{a as l,j as b}from"./vendor-CMvHcHbC.js";import{b as N,c as y}from"./index.esm-CuCM43ir.js";import{u as v}from"./storage-B4ijfEY4.js";import{d as S,b as n,c as d,a as u}from"./CRow-F-29Amx2.js";import{d as E,e as F,b as L,c as p}from"./CForm-B94iwgBD.js";import{C as R}from"./CInputGroup-DHNNS92A.js";import{C as M}from"./CInputGroupText-xn97kw0E.js";import"./redux-IAqEd8mO.js";var V=["512 512","<path fill='var(--ci-primary-color, currentColor)' d='M16,112V496H496V112ZM236.8,341.6a32.167,32.167,0,0,0,38.4,0L298.667,324,464,448v16H48V448L213.333,324ZM256,316,48,160V144H464v16ZM48,200,186.667,304,48,408ZM464,408,325.333,304,464,200Z' class='ci-primary'/>"];const D=()=>{const[r,f]=l.useState(""),[a,o]=l.useState(!1),[m,t]=l.useState(""),[g,x]=l.useState(!1),h=b(),{t:e}=v(),j=async c=>{if(c.preventDefault(),o(!0),t(""),x(!1),!r){t(e("forgotPasswordPage.errors.emailRequired")),o(!1);return}if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(r)){t(e("forgotPasswordPage.errors.invalidEmail")),o(!1);return}try{const{error:i}=await w(r);if(i)throw new Error(i);x(!0)}catch(i){t(i.message||e("forgotPasswordPage.errors.resetFailed"))}finally{o(!1)}};return s.jsx("div",{className:"bg-body-tertiary min-vh-100 d-flex flex-row align-items-center",children:s.jsx(S,{children:s.jsx(n,{className:"justify-content-center",children:s.jsx(d,{md:6,children:s.jsx(E,{className:"p-4",children:s.jsx(F,{children:s.jsxs(L,{onSubmit:j,children:[s.jsx("h1",{children:e("forgotPasswordPage.title")}),s.jsx("p",{className:"text-body-secondary",children:e("forgotPasswordPage.description")}),m&&s.jsx(p,{color:"danger",className:"mb-3",children:m}),g&&s.jsxs(p,{color:"success",className:"mb-3",children:[s.jsx("strong",{children:e("forgotPasswordPage.success.title")}),s.jsx("p",{className:"mb-0 mt-2",children:e("forgotPasswordPage.success.description")})]}),!g&&s.jsxs(s.Fragment,{children:[s.jsxs(R,{className:"mb-4",children:[s.jsx(M,{children:s.jsx(N,{icon:V})}),s.jsx(y,{type:"email",placeholder:e("forgotPasswordPage.placeholders.email"),autoComplete:"email",value:r,onChange:c=>f(c.target.value),required:!0,disabled:a})]}),s.jsx(n,{children:s.jsx(d,{xs:12,children:s.jsx(u,{type:"submit",color:"primary",className:"px-4",disabled:a,children:a?s.jsxs(s.Fragment,{children:[s.jsx(C,{size:"sm",className:"me-2"}),e("forgotPasswordPage.sending")]}):e("forgotPasswordPage.sendResetLink")})})})]}),s.jsx(n,{className:"mt-3",children:s.jsx(d,{xs:12,children:s.jsx(u,{color:"link",className:"px-0",onClick:()=>h(P.login),disabled:a,children:e("forgotPasswordPage.backToLogin")})})})]})})})})})})})};export{D as default};
