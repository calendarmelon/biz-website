import{u as C,j as s,f as A}from"./index-D9lviF5g.js";import{a as x}from"./vendor-CMvHcHbC.js";import{b as D,c as R}from"./analytics-DIt7Zoir.js";import{u as S}from"./storage-DBNGZGiS.js";import{u as k,P as E}from"./DefaultLayout-C9XncwlP.js";import{c as L,d as n,e as o}from"./CForm-CDI_MHaX.js";import{b as p,c as d}from"./CRow-DI1SHk01.js";import{C as h}from"./CCardHeader-RgXls4u9.js";import"./redux-IAqEd8mO.js";import"./index.esm-D2KpNuWo.js";import"./staff-CasMKpZ_.js";import"./cil-user-Ddrdy7PS.js";const W=()=>{const{t:a}=S(),{business:r}=C(),[l,y]=x.useState(null),[i,N]=x.useState(null),[v,j]=x.useState(!0),[u,g]=x.useState(null);k({pageType:E.ANALYTICS}),x.useEffect(()=>{(async()=>{if(!(r!=null&&r.id)){j(!1);return}j(!0),g(null);const[t,c]=await Promise.all([D(r.id),R(r.id)]);t.error?g(t.error):y(t.data),c.error||N(c.data),j(!1)})()},[r==null?void 0:r.id]);const w=e=>e>=70?"danger":e>=50?"warning":"success",b=(l==null?void 0:l.bounceRate)||0,f=w(b);return v?s.jsx("div",{className:"text-center",children:s.jsx(A,{color:"primary"})}):u?s.jsxs(L,{color:"danger",children:[a("analytics.errorLoadingAnalytics"),": ",u]}):s.jsxs(s.Fragment,{children:[s.jsx(p,{children:s.jsx(d,{xs:12,children:s.jsx(n,{className:"mb-4",children:s.jsx(h,{children:s.jsx("strong",{children:a("analytics.analyticsDashboard")})})})})}),s.jsxs(p,{children:[s.jsx(d,{sm:6,lg:4,children:s.jsx(n,{className:"mb-4",children:s.jsxs(o,{children:[s.jsx("div",{className:"text-medium-emphasis text-uppercase fw-semibold small",children:a("analytics.totalVisitors")}),s.jsx("div",{className:"text-muted small mt-2",children:a("analytics.totalVisitorsDescription")}),s.jsx("div",{className:"fs-2 fw-semibold",children:(l==null?void 0:l.totalVisitors)||0})]})})}),s.jsx(d,{sm:6,lg:4,children:s.jsx(n,{className:"mb-4",children:s.jsxs(o,{children:[s.jsx("div",{className:"text-medium-emphasis text-uppercase fw-semibold small",children:a("analytics.pageViews")}),s.jsx("div",{className:"text-muted small mt-2",children:a("analytics.pageViewsDescription")}),s.jsx("div",{className:"fs-2 fw-semibold",children:(l==null?void 0:l.pageViews)||0})]})})}),s.jsx(d,{sm:6,lg:4,children:s.jsx(n,{className:"mb-4",color:f,textColor:f==="warning"?"dark":"white",children:s.jsxs(o,{children:[s.jsxs("div",{className:"d-flex justify-content-between align-items-center mb-2",children:[s.jsx("div",{className:"text-uppercase fw-semibold small opacity-75",children:a("analytics.bounceRate")}),s.jsx("svg",{className:"opacity-75",width:"20",height:"20",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 7h8m0 0v8m0-8l-8 8-4-4-6 6"})})]}),s.jsx("div",{className:"small opacity-75",children:a("analytics.bounceRateDescription")}),s.jsxs("div",{className:"fs-2 fw-bold mb-2",children:[b.toFixed(1),"%"]})]})})})]}),i&&s.jsxs(p,{children:[s.jsx(d,{lg:4,children:s.jsxs(n,{className:"mb-4",children:[s.jsx(h,{children:s.jsx("strong",{children:a("analytics.browsers")})}),s.jsx(o,{children:i.browsers&&i.browsers.length>0?s.jsx("div",{children:i.browsers.map((e,t)=>s.jsxs("div",{className:"mb-3",children:[s.jsxs("div",{className:"d-flex justify-content-between mb-1",children:[s.jsx("span",{className:"text-capitalize",children:e.type}),s.jsx("span",{className:"fw-semibold",children:e.count})]}),s.jsx("div",{className:"progress",style:{height:"8px"},children:s.jsx("div",{className:"progress-bar bg-primary",role:"progressbar",style:{width:`${e.count/i.browsers.reduce((c,m)=>c+m.count,0)*100}%`}})})]},t))}):s.jsx("p",{className:"text-muted small",children:a("analytics.noData")})})]})}),s.jsx(d,{lg:4,children:s.jsxs(n,{className:"mb-4",children:[s.jsx(h,{children:s.jsx("strong",{children:a("analytics.devices")})}),s.jsx(o,{children:i.devices&&i.devices.length>0?s.jsx("div",{children:i.devices.map((e,t)=>s.jsxs("div",{className:"mb-3",children:[s.jsxs("div",{className:"d-flex justify-content-between mb-1",children:[s.jsx("span",{className:"text-capitalize",children:e.type}),s.jsx("span",{className:"fw-semibold",children:e.count})]}),s.jsx("div",{className:"progress",style:{height:"8px"},children:s.jsx("div",{className:"progress-bar bg-success",role:"progressbar",style:{width:`${e.count/i.devices.reduce((c,m)=>c+m.count,0)*100}%`}})})]},t))}):s.jsx("p",{className:"text-muted small",children:a("analytics.noData")})})]})}),s.jsx(d,{lg:4,children:s.jsxs(n,{className:"mb-4",children:[s.jsx(h,{children:s.jsx("strong",{children:a("analytics.operatingSystems")})}),s.jsx(o,{children:i.os&&i.os.length>0?s.jsx("div",{children:i.os.map((e,t)=>s.jsxs("div",{className:"mb-3",children:[s.jsxs("div",{className:"d-flex justify-content-between mb-1",children:[s.jsx("span",{className:"text-capitalize",children:e.type}),s.jsx("span",{className:"fw-semibold",children:e.count})]}),s.jsx("div",{className:"progress",style:{height:"8px"},children:s.jsx("div",{className:"progress-bar bg-info",role:"progressbar",style:{width:`${e.count/i.os.reduce((c,m)=>c+m.count,0)*100}%`}})})]},t))}):s.jsx("p",{className:"text-muted small",children:a("analytics.noData")})})]})})]})]})};export{W as default};
