import{u as C,j as s,C as A}from"./index-Bmzq44n2.js";import{a as x}from"./vendor-CMvHcHbC.js";import{u as D}from"./useLocale-Dw1EenQh.js";import{b as R,c as S}from"./analytics-DcvTOWHS.js";import{c as V,d as n,e as o}from"./CForm-BKs0LH0T.js";import{b as p,c as d}from"./CRow-CNo-h43X.js";import{C as h}from"./CCardHeader-DMf64TQU.js";import"./redux-IAqEd8mO.js";const H=()=>{const{t:a}=D(),{business:r}=C(),[t,y]=x.useState(null),[l,N]=x.useState(null),[v,j]=x.useState(!0),[u,g]=x.useState(null);x.useEffect(()=>{(async()=>{if(!(r!=null&&r.id)){j(!1);return}j(!0),g(null);const[i,c]=await Promise.all([R(r.id),S(r.id)]);i.error?g(i.error):y(i.data),c.error||N(c.data),j(!1)})()},[r==null?void 0:r.id]);const w=e=>e>=70?"danger":e>=50?"warning":"success",b=(t==null?void 0:t.bounceRate)||0,f=w(b);return v?s.jsx("div",{className:"text-center",children:s.jsx(A,{color:"primary"})}):u?s.jsxs(V,{color:"danger",children:[a("analytics.errorLoadingAnalytics"),": ",u]}):s.jsxs(s.Fragment,{children:[s.jsx(p,{children:s.jsx(d,{xs:12,children:s.jsx(n,{className:"mb-4",children:s.jsx(h,{children:s.jsx("strong",{children:a("analytics.analyticsDashboard")})})})})}),s.jsxs(p,{children:[s.jsx(d,{sm:6,lg:4,children:s.jsx(n,{className:"mb-4",children:s.jsxs(o,{children:[s.jsx("div",{className:"text-medium-emphasis text-uppercase fw-semibold small",children:a("analytics.totalVisitors")}),s.jsx("div",{className:"text-muted small mt-2",children:a("analytics.totalVisitorsDescription")}),s.jsx("div",{className:"fs-2 fw-semibold",children:(t==null?void 0:t.totalVisitors)||0})]})})}),s.jsx(d,{sm:6,lg:4,children:s.jsx(n,{className:"mb-4",children:s.jsxs(o,{children:[s.jsx("div",{className:"text-medium-emphasis text-uppercase fw-semibold small",children:a("analytics.pageViews")}),s.jsx("div",{className:"text-muted small mt-2",children:a("analytics.pageViewsDescription")}),s.jsx("div",{className:"fs-2 fw-semibold",children:(t==null?void 0:t.pageViews)||0})]})})}),s.jsx(d,{sm:6,lg:4,children:s.jsx(n,{className:"mb-4",color:f,textColor:f==="warning"?"dark":"white",children:s.jsxs(o,{children:[s.jsxs("div",{className:"d-flex justify-content-between align-items-center mb-2",children:[s.jsx("div",{className:"text-uppercase fw-semibold small opacity-75",children:a("analytics.bounceRate")}),s.jsx("svg",{className:"opacity-75",width:"20",height:"20",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 7h8m0 0v8m0-8l-8 8-4-4-6 6"})})]}),s.jsx("div",{className:"small opacity-75",children:a("analytics.bounceRateDescription")}),s.jsxs("div",{className:"fs-2 fw-bold mb-2",children:[b.toFixed(1),"%"]})]})})})]}),l&&s.jsxs(p,{children:[s.jsx(d,{lg:4,children:s.jsxs(n,{className:"mb-4",children:[s.jsx(h,{children:s.jsx("strong",{children:a("analytics.browsers")})}),s.jsx(o,{children:l.browsers&&l.browsers.length>0?s.jsx("div",{children:l.browsers.map((e,i)=>s.jsxs("div",{className:"mb-3",children:[s.jsxs("div",{className:"d-flex justify-content-between mb-1",children:[s.jsx("span",{className:"text-capitalize",children:e.type}),s.jsx("span",{className:"fw-semibold",children:e.count})]}),s.jsx("div",{className:"progress",style:{height:"8px"},children:s.jsx("div",{className:"progress-bar bg-primary",role:"progressbar",style:{width:`${e.count/l.browsers.reduce((c,m)=>c+m.count,0)*100}%`}})})]},i))}):s.jsx("p",{className:"text-muted small",children:a("analytics.noData")})})]})}),s.jsx(d,{lg:4,children:s.jsxs(n,{className:"mb-4",children:[s.jsx(h,{children:s.jsx("strong",{children:a("analytics.devices")})}),s.jsx(o,{children:l.devices&&l.devices.length>0?s.jsx("div",{children:l.devices.map((e,i)=>s.jsxs("div",{className:"mb-3",children:[s.jsxs("div",{className:"d-flex justify-content-between mb-1",children:[s.jsx("span",{className:"text-capitalize",children:e.type}),s.jsx("span",{className:"fw-semibold",children:e.count})]}),s.jsx("div",{className:"progress",style:{height:"8px"},children:s.jsx("div",{className:"progress-bar bg-success",role:"progressbar",style:{width:`${e.count/l.devices.reduce((c,m)=>c+m.count,0)*100}%`}})})]},i))}):s.jsx("p",{className:"text-muted small",children:a("analytics.noData")})})]})}),s.jsx(d,{lg:4,children:s.jsxs(n,{className:"mb-4",children:[s.jsx(h,{children:s.jsx("strong",{children:a("analytics.operatingSystems")})}),s.jsx(o,{children:l.os&&l.os.length>0?s.jsx("div",{children:l.os.map((e,i)=>s.jsxs("div",{className:"mb-3",children:[s.jsxs("div",{className:"d-flex justify-content-between mb-1",children:[s.jsx("span",{className:"text-capitalize",children:e.type}),s.jsx("span",{className:"fw-semibold",children:e.count})]}),s.jsx("div",{className:"progress",style:{height:"8px"},children:s.jsx("div",{className:"progress-bar bg-info",role:"progressbar",style:{width:`${e.count/l.os.reduce((c,m)=>c+m.count,0)*100}%`}})})]},i))}):s.jsx("p",{className:"text-muted small",children:a("analytics.noData")})})]})})]})]})};export{H as default};
