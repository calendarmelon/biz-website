import{u as A,N as y,j as r,f as B,i as V}from"./index-D9lviF5g.js";import{a as i,j as q}from"./vendor-CMvHcHbC.js";import{b as n,c as d}from"./index.esm-D2KpNuWo.js";import{u as F}from"./storage-DBNGZGiS.js";import{d as I,b as R,c as k,a as v}from"./CRow-DI1SHk01.js";import{d as L,e as D,b as G,c as T}from"./CForm-CDI_MHaX.js";import{C as m}from"./CInputGroup-B0mBqDTf.js";import{C as u}from"./CInputGroupText-X_3AKnyE.js";import{c as U}from"./cil-user-Ddrdy7PS.js";import{c as w}from"./cil-lock-locked-DmxpJbVL.js";import"./redux-IAqEd8mO.js";var z=["512 512","<path fill='var(--ci-primary-color, currentColor)' d='M440,464V16H72V464H16v32H496V464Zm-32,0H272V400H240v64H104V48H408Z' class='ci-primary'/><rect width='32' height='32' x='160' y='304' fill='var(--ci-primary-color, currentColor)' class='ci-primary'/><rect width='32' height='32' x='240' y='304' fill='var(--ci-primary-color, currentColor)' class='ci-primary'/><rect width='32' height='32' x='320' y='304' fill='var(--ci-primary-color, currentColor)' class='ci-primary'/><rect width='32' height='32' x='160' y='208' fill='var(--ci-primary-color, currentColor)' class='ci-primary'/><rect width='32' height='32' x='240' y='208' fill='var(--ci-primary-color, currentColor)' class='ci-primary'/><rect width='32' height='32' x='320' y='208' fill='var(--ci-primary-color, currentColor)' class='ci-primary'/><rect width='32' height='32' x='160' y='112' fill='var(--ci-primary-color, currentColor)' class='ci-primary'/><rect width='32' height='32' x='240' y='112' fill='var(--ci-primary-color, currentColor)' class='ci-primary'/><rect width='32' height='32' x='320' y='112' fill='var(--ci-primary-color, currentColor)' class='ci-primary'/>"];const er=()=>{const[h,b]=i.useState(null),[p,N]=i.useState(null),[t,P]=i.useState(null),[g,S]=i.useState(null),[a,l]=i.useState(!1),[f,o]=i.useState(""),c=q(),{user:C}=A(),{t:e}=F();i.useEffect(()=>{C&&c(y.dashboard)},[C,c]);const H=async s=>{if(console.log("[DEBUG] Register handleSubmit()"),s.preventDefault(),l(!0),o(""),!h||!p||!t||!g){o(e("registerPage.errors.allFieldsRequired")),l(!1);return}if(t!==g){o(e("registerPage.errors.passwordsDoNotMatch")),l(!1);return}if(t.length<6){o(e("registerPage.errors.passwordTooShort")),l(!1);return}try{const{user:x,session:E,business:M,error:j}=await V(h,p,t);if(j)throw new Error(j);x&&E&&c(y.dashboard)}catch(x){o(x.message||e("registerPage.errors.registrationFailed"))}finally{l(!1)}};return r.jsx("div",{className:"bg-body-tertiary min-vh-100 d-flex flex-row align-items-center",children:r.jsx(I,{children:r.jsx(R,{className:"justify-content-center",children:r.jsx(k,{md:9,lg:7,xl:6,children:r.jsx(L,{className:"mx-4",children:r.jsx(D,{className:"p-4",children:r.jsxs(G,{onSubmit:H,children:[r.jsx("h1",{children:e("registerPage.heading")}),r.jsx("p",{className:"text-body-secondary",children:e("registerPage.description")}),f&&r.jsx(T,{color:"danger",className:"mb-3",children:f}),r.jsxs(m,{className:"mb-3",children:[r.jsx(u,{children:r.jsx(n,{icon:z})}),r.jsx(d,{type:"text",placeholder:e("registerPage.placeholders.businessName"),autoComplete:"organization",value:h,onChange:s=>b(s.target.value),required:!0,disabled:a})]}),r.jsxs(m,{className:"mb-3",children:[r.jsx(u,{children:r.jsx(n,{icon:U})}),r.jsx(d,{type:"email",placeholder:e("registerPage.placeholders.email"),autoComplete:"email",value:p,onChange:s=>N(s.target.value),required:!0,disabled:a})]}),r.jsxs(m,{className:"mb-3",children:[r.jsx(u,{children:r.jsx(n,{icon:w})}),r.jsx(d,{type:"password",placeholder:e("registerPage.placeholders.password"),autoComplete:"new-password",value:t,onChange:s=>P(s.target.value),required:!0,disabled:a})]}),r.jsxs(m,{className:"mb-4",children:[r.jsx(u,{children:r.jsx(n,{icon:w})}),r.jsx(d,{type:"password",placeholder:e("registerPage.placeholders.confirmPassword"),autoComplete:"new-password",value:g,onChange:s=>S(s.target.value),required:!0,disabled:a})]}),r.jsx("div",{className:"d-grid",children:r.jsx(v,{type:"submit",color:"success",disabled:a,children:a?r.jsxs(r.Fragment,{children:[r.jsx(B,{size:"sm",className:"me-2"}),e("registerPage.creatingAccount")]}):e("registerPage.createAccount")})}),r.jsxs("div",{className:"text-center mt-3",children:[r.jsx("span",{className:"text-body-secondary",children:e("registerPage.alreadyHaveAccount")}),r.jsx(v,{color:"link",className:"p-0",onClick:()=>c(y.login),disabled:a,children:e("registerPage.signInHere")})]})]})})})})})})})};export{er as default};
