import{_ as D,c as B,P as r,j as e,u as Y,x as K,f as I,y as Z}from"./index-D9lviF5g.js";import{a as b,R as _}from"./vendor-CMvHcHbC.js";import{u as P}from"./storage-DBNGZGiS.js";import{v as J,w as Q,x as X,i as F,f as w,u as ee,P as se}from"./DefaultLayout-C9XncwlP.js";import{b as f,c as L,d as ie,e as ae}from"./CForm-CDI_MHaX.js";import{b as N,c as m,a as C}from"./CRow-DI1SHk01.js";import{a as c,c as x}from"./index.esm-D2KpNuWo.js";import{C as ne}from"./CFormCheck-DRMuUBFc.js";import{C as le}from"./CCardHeader-RgXls4u9.js";import"./redux-IAqEd8mO.js";import"./staff-CasMKpZ_.js";import"./cil-user-Ddrdy7PS.js";const S=b.forwardRef((a,l)=>{var{className:s,id:n,invalid:i,label:d,reverse:j,size:t,type:v="checkbox",valid:o}=a,u=D(a,["className","id","invalid","label","reverse","size","type","valid"]);return _.createElement("div",{className:B("form-check form-switch",{"form-check-reverse":j,[`form-switch-${t}`]:t,"is-invalid":i,"is-valid":o},s)},_.createElement("input",Object.assign({type:v,className:B("form-check-input",{"is-invalid":i,"is-valid":o}),id:n},u,{ref:l})),d&&_.createElement(c,Object.assign({customClassName:"form-check-label"},n&&{htmlFor:n}),d))});S.propTypes={className:r.string,id:r.string,invalid:r.bool,label:r.oneOfType([r.string,r.node]),reverse:r.bool,size:r.oneOf(["lg","xl"]),type:r.oneOf(["checkbox","radio"]),valid:r.bool};S.displayName="CFormSwitch";const q=({activeSection:a,onSectionChange:l})=>{const{t:s}=P(),n=[{id:"general",icon:"cil-info",label:s("settingsPage.navigation.general")},{id:"location",icon:"cil-location-pin",label:s("settingsPage.navigation.location")},{id:"hours",icon:"cil-clock",label:s("settingsPage.navigation.hours")},{id:"policies",icon:"cil-file",label:s("settingsPage.navigation.policies")},{id:"regional",icon:"cil-globe-alt",label:s("settingsPage.navigation.regional")},{id:"branding",icon:"cil-image",label:s("settingsPage.navigation.branding")},{id:"online",icon:"cil-cloud",label:s("settingsPage.navigation.online")}];return e.jsx("div",{className:"settings-navigation",children:e.jsx(J,{variant:"pills",layout:"fill",className:"flex-column",children:n.map(i=>e.jsx(Q,{children:e.jsx(X,{active:a===i.id,onClick:()=>l(i.id),className:"settings-nav-link",style:{cursor:"pointer"},children:i.label})},i.id))})})};q.propTypes={activeSection:r.string.isRequired,onSectionChange:r.func.isRequired};const A=({formData:a,onChange:l})=>{const{t:s}=P(),n=(i,d)=>{l({...a,[i]:d})};return e.jsxs("div",{className:"settings-section",children:[e.jsxs("div",{className:"section-header mb-4",children:[e.jsx("h4",{children:s("settingsPage.general.title")}),e.jsx("p",{className:"text-medium-emphasis",children:s("settingsPage.general.description")})]}),e.jsxs(f,{children:[e.jsxs(N,{className:"mb-3",children:[e.jsxs(m,{md:6,children:[e.jsx(c,{htmlFor:"businessName",children:s("settingsPage.general.businessName")}),e.jsx(x,{type:"text",id:"businessName",value:a.name||"",onChange:i=>n("name",i.target.value),placeholder:s("settingsPage.general.businessNamePlaceholder")})]}),e.jsxs(m,{md:6,children:[e.jsx(c,{htmlFor:"businessType",children:s("settingsPage.general.businessType")}),e.jsx(x,{type:"text",id:"businessType",value:a.business_type||"",onChange:i=>n("business_type",i.target.value),placeholder:s("settingsPage.general.businessTypePlaceholder")})]})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx(c,{htmlFor:"description",children:s("settingsPage.general.description")}),e.jsx(F,{id:"description",rows:4,value:a.description||"",onChange:i=>n("description",i.target.value),placeholder:s("settingsPage.general.descriptionPlaceholder")})]}),e.jsxs(N,{className:"mb-3",children:[e.jsxs(m,{md:6,children:[e.jsx(c,{htmlFor:"email",children:s("settingsPage.general.email")}),e.jsx(x,{type:"email",id:"email",value:a.email||"",onChange:i=>n("email",i.target.value),placeholder:s("settingsPage.general.emailPlaceholder")})]}),e.jsxs(m,{md:6,children:[e.jsx(c,{htmlFor:"phone",children:s("settingsPage.general.phone")}),e.jsx(x,{type:"tel",id:"phone",value:a.phone||"",onChange:i=>n("phone",i.target.value),placeholder:s("settingsPage.general.phonePlaceholder")})]})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx(c,{htmlFor:"website",children:s("settingsPage.general.website")}),e.jsx(x,{type:"url",id:"website",value:a.website_url||"",onChange:i=>n("website_url",i.target.value),placeholder:s("settingsPage.general.websitePlaceholder")})]})]})]})};A.propTypes={formData:r.object.isRequired,onChange:r.func.isRequired};const z=({formData:a,onChange:l})=>{const{t:s}=P(),n=(i,d)=>{l({...a,[i]:d})};return e.jsxs("div",{className:"settings-section",children:[e.jsxs("div",{className:"section-header mb-4",children:[e.jsx("h4",{children:s("settingsPage.location.title")}),e.jsx("p",{className:"text-medium-emphasis",children:s("settingsPage.location.description")})]}),e.jsxs(f,{children:[e.jsxs("div",{className:"mb-3",children:[e.jsx(c,{htmlFor:"addressLine1",children:s("settingsPage.location.addressLine1")}),e.jsx(x,{type:"text",id:"addressLine1",value:a.address_line1||"",onChange:i=>n("address_line1",i.target.value),placeholder:s("settingsPage.location.addressLine1Placeholder")})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx(c,{htmlFor:"addressLine2",children:s("settingsPage.location.addressLine2")}),e.jsx(x,{type:"text",id:"addressLine2",value:a.address_line2||"",onChange:i=>n("address_line2",i.target.value),placeholder:s("settingsPage.location.addressLine2Placeholder")})]}),e.jsxs(N,{className:"mb-3",children:[e.jsxs(m,{md:6,children:[e.jsx(c,{htmlFor:"city",children:s("settingsPage.location.city")}),e.jsx(x,{type:"text",id:"city",value:a.city||"",onChange:i=>n("city",i.target.value),placeholder:s("settingsPage.location.cityPlaceholder")})]}),e.jsxs(m,{md:6,children:[e.jsx(c,{htmlFor:"state",children:s("settingsPage.location.state")}),e.jsx(x,{type:"text",id:"state",value:a.state_province||"",onChange:i=>n("state_province",i.target.value),placeholder:s("settingsPage.location.statePlaceholder")})]})]}),e.jsxs(N,{className:"mb-3",children:[e.jsxs(m,{md:6,children:[e.jsx(c,{htmlFor:"postalCode",children:s("settingsPage.location.postalCode")}),e.jsx(x,{type:"text",id:"postalCode",value:a.postal_code||"",onChange:i=>n("postal_code",i.target.value),placeholder:s("settingsPage.location.postalCodePlaceholder")})]}),e.jsxs(m,{md:6,children:[e.jsx(c,{htmlFor:"country",children:s("settingsPage.location.country")}),e.jsx(x,{type:"text",id:"country",value:a.country||"",onChange:i=>n("country",i.target.value),placeholder:s("settingsPage.location.countryPlaceholder")})]})]})]})]})};z.propTypes={formData:r.object.isRequired,onChange:r.func.isRequired};const G=({formData:a,onChange:l})=>{const{t:s}=P(),[n,i]=b.useState(""),d=[{key:"monday",label:s("settingsPage.hours.monday")},{key:"tuesday",label:s("settingsPage.hours.tuesday")},{key:"wednesday",label:s("settingsPage.hours.wednesday")},{key:"thursday",label:s("settingsPage.hours.thursday")},{key:"friday",label:s("settingsPage.hours.friday")},{key:"saturday",label:s("settingsPage.hours.saturday")},{key:"sunday",label:s("settingsPage.hours.sunday")}],j=a.business_hours||{},t=(o,u,h)=>{var R;const p={...j[o]||{},[u]:h};if(p.open&&p.close&&p.close<=p.open){const E=((R=d.find(T=>T.key===o))==null?void 0:R.label)||o;i(`Warning: ${E} closing time (${p.close}) should be after opening time (${p.open}). Please use 24-hour format (e.g., 16:00 for 4 PM).`)}else i("");const k={...j,[o]:p};l({...a,business_hours:k})},v=(o,u)=>{const h={...j,[o]:{...j[o],closed:u}};l({...a,business_hours:h})};return e.jsxs("div",{className:"settings-section",children:[e.jsxs("div",{className:"section-header mb-4",children:[e.jsx("h4",{children:s("settingsPage.hours.title")}),e.jsx("p",{className:"text-medium-emphasis",children:s("settingsPage.hours.description")})]}),n&&e.jsx(L,{color:"warning",dismissible:!0,onClose:()=>i(""),children:n}),e.jsx(f,{children:d.map(o=>{const u=j[o.key]||{open:"09:00",close:"17:00",closed:!1};return e.jsx("div",{className:"mb-3 pb-3 border-bottom",children:e.jsxs(N,{className:"align-items-center",children:[e.jsx(m,{xs:12,md:3,children:e.jsx(c,{className:"fw-semibold mb-md-0",children:o.label})}),e.jsx(m,{xs:12,md:7,children:u.closed?e.jsx("div",{className:"text-medium-emphasis fst-italic",children:s("settingsPage.hours.closed")}):e.jsxs(N,{className:"g-2",children:[e.jsx(m,{xs:6,children:e.jsxs("div",{children:[e.jsx("small",{className:"text-medium-emphasis d-block mb-1",children:s("settingsPage.hours.openTime")}),e.jsx(x,{type:"time",value:u.open||"09:00",onChange:h=>t(o.key,"open",h.target.value)})]})}),e.jsx(m,{xs:6,children:e.jsxs("div",{children:[e.jsx("small",{className:"text-medium-emphasis d-block mb-1",children:s("settingsPage.hours.closeTime")}),e.jsx(x,{type:"time",value:u.close||"17:00",onChange:h=>t(o.key,"close",h.target.value)})]})})]})}),e.jsx(m,{xs:12,md:2,children:e.jsx(ne,{id:`closed-${o.key}`,label:s("settingsPage.hours.closed"),checked:u.closed||!1,onChange:h=>v(o.key,h.target.checked)})})]})},o.key)})})]})};G.propTypes={formData:r.object.isRequired,onChange:r.func.isRequired};const H=({formData:a,onChange:l})=>{const{t:s}=P(),n=(i,d)=>{l({...a,[i]:d})};return e.jsxs("div",{className:"settings-section",children:[e.jsxs("div",{className:"section-header mb-4",children:[e.jsx("h4",{children:s("settingsPage.policies.title")}),e.jsx("p",{className:"text-medium-emphasis",children:s("settingsPage.policies.description")})]}),e.jsxs(f,{children:[e.jsxs("div",{className:"mb-3",children:[e.jsx(c,{htmlFor:"cancellationPolicy",children:s("settingsPage.policies.cancellationPolicy")}),e.jsx(F,{id:"cancellationPolicy",rows:5,value:a.cancellation_policy||"",onChange:i=>n("cancellation_policy",i.target.value),placeholder:s("settingsPage.policies.cancellationPolicyPlaceholder")})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx(c,{htmlFor:"bookingPolicy",children:s("settingsPage.policies.bookingPolicy")}),e.jsx(F,{id:"bookingPolicy",rows:5,value:a.booking_policy||"",onChange:i=>n("booking_policy",i.target.value),placeholder:s("settingsPage.policies.bookingPolicyPlaceholder")})]})]})]})};H.propTypes={formData:r.object.isRequired,onChange:r.func.isRequired};const U=({formData:a,onChange:l})=>{const{t:s}=P(),n=(t,v)=>{l({...a,[t]:v})},i=[{value:"USD",label:"USD - US Dollar"},{value:"EUR",label:"EUR - Euro"},{value:"GBP",label:"GBP - British Pound"},{value:"PLN",label:"PLN - Polish Zloty"},{value:"SAR",label:"SAR - Saudi Riyal"},{value:"AED",label:"AED - UAE Dirham"},{value:"RUB",label:"RUB - Russian Ruble"}],d=[{value:"en",label:"English"},{value:"pl",label:"Polski"},{value:"ar",label:"العربية"},{value:"ru",label:"Русский"}],j=[{value:"America/New_York",label:"Eastern Time (ET)"},{value:"America/Chicago",label:"Central Time (CT)"},{value:"America/Denver",label:"Mountain Time (MT)"},{value:"America/Los_Angeles",label:"Pacific Time (PT)"},{value:"Europe/London",label:"London (GMT)"},{value:"Europe/Paris",label:"Paris (CET)"},{value:"Europe/Warsaw",label:"Warsaw (CET)"},{value:"Europe/Moscow",label:"Moscow (MSK)"},{value:"Asia/Dubai",label:"Dubai (GST)"},{value:"Asia/Riyadh",label:"Riyadh (AST)"}];return e.jsxs("div",{className:"settings-section",children:[e.jsxs("div",{className:"section-header mb-4",children:[e.jsx("h4",{children:s("settingsPage.regional.title")}),e.jsx("p",{className:"text-medium-emphasis",children:s("settingsPage.regional.description")})]}),e.jsxs(f,{children:[e.jsxs(N,{className:"mb-3",children:[e.jsxs(m,{md:6,children:[e.jsx(c,{htmlFor:"currency",children:s("settingsPage.regional.currency")}),e.jsxs(w,{id:"currency",value:a.currency||"",onChange:t=>n("currency",t.target.value),children:[e.jsx("option",{value:"",children:s("settingsPage.regional.currencyPlaceholder")}),i.map(t=>e.jsx("option",{value:t.value,children:t.label},t.value))]})]}),e.jsxs(m,{md:6,children:[e.jsx(c,{htmlFor:"language",children:s("settingsPage.regional.language")}),e.jsxs(w,{id:"language",value:a.language||"",onChange:t=>n("language",t.target.value),children:[e.jsx("option",{value:"",children:s("settingsPage.regional.languagePlaceholder")}),d.map(t=>e.jsx("option",{value:t.value,children:t.label},t.value))]})]})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx(c,{htmlFor:"timezone",children:s("settingsPage.regional.timezone")}),e.jsxs(w,{id:"timezone",value:a.timezone||"",onChange:t=>n("timezone",t.target.value),children:[e.jsx("option",{value:"",children:s("settingsPage.regional.timezonePlaceholder")}),j.map(t=>e.jsx("option",{value:t.value,children:t.label},t.value))]})]})]})]})};U.propTypes={formData:r.object.isRequired,onChange:r.func.isRequired};const M=({formData:a,onChange:l})=>{const{t:s}=P(),n=(i,d)=>{l({...a,[i]:d})};return e.jsxs("div",{className:"settings-section",children:[e.jsxs("div",{className:"section-header mb-4",children:[e.jsx("h4",{children:s("settingsPage.branding.title")}),e.jsx("p",{className:"text-medium-emphasis",children:s("settingsPage.branding.description")})]}),e.jsxs(f,{children:[e.jsxs("div",{className:"mb-4",children:[e.jsx(c,{children:s("settingsPage.branding.logo")}),e.jsx("p",{className:"text-medium-emphasis small",children:s("settingsPage.branding.logoDescription")}),a.logo_url?e.jsxs("div",{className:"d-flex align-items-center gap-3",children:[e.jsx("img",{src:a.logo_url,alt:"Business logo",style:{width:"100px",height:"100px",objectFit:"cover",borderRadius:"8px"}}),e.jsx("div",{children:e.jsx(C,{color:"danger",variant:"outline",size:"sm",onClick:()=>n("logo_url",""),children:s("settingsPage.branding.removeButton")})})]}):e.jsx(C,{color:"primary",variant:"outline",disabled:!0,children:s("settingsPage.branding.uploadButton")})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx(c,{children:s("settingsPage.branding.coverImage")}),e.jsx("p",{className:"text-medium-emphasis small",children:s("settingsPage.branding.coverImageDescription")}),a.cover_image_url?e.jsxs("div",{className:"mb-3",children:[e.jsx("img",{src:a.cover_image_url,alt:"Cover",style:{width:"100%",maxWidth:"600px",height:"auto",borderRadius:"8px"}}),e.jsx("div",{className:"mt-2",children:e.jsx(C,{color:"danger",variant:"outline",size:"sm",onClick:()=>n("cover_image_url",""),disabled:!0,children:s("settingsPage.branding.removeButton")})})]}):e.jsx(C,{color:"primary",variant:"outline",disabled:!0,children:s("settingsPage.branding.uploadButton")})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx(c,{children:s("settingsPage.branding.gallery")}),e.jsx("p",{className:"text-medium-emphasis small",children:s("settingsPage.branding.galleryDescription")}),e.jsx(C,{color:"primary",variant:"outline",disabled:!0,children:s("settingsPage.branding.uploadButton")})]})]})]})};M.propTypes={formData:r.object.isRequired,onChange:r.func.isRequired};const W=({formData:a,onChange:l})=>{const{t:s}=P(),n=(i,d)=>{l({...a,[i]:d})};return e.jsxs("div",{className:"settings-section",children:[e.jsxs("div",{className:"section-header mb-4",children:[e.jsx("h4",{children:s("settingsPage.online.title")}),e.jsx("p",{className:"text-medium-emphasis",children:s("settingsPage.online.description")})]}),e.jsxs(f,{children:[e.jsx("div",{className:"mb-4 pb-3 border-bottom",children:e.jsxs("div",{className:"d-flex justify-content-between align-items-start",children:[e.jsxs("div",{children:[e.jsx(c,{className:"fw-semibold mb-1",children:s("settingsPage.online.isActive")}),e.jsx("p",{className:"text-medium-emphasis small mb-0",children:s("settingsPage.online.isActiveDescription")})]}),e.jsx(S,{id:"isActive",checked:a.is_active||!1,onChange:i=>n("is_active",i.target.checked),size:"lg"})]})}),e.jsx("div",{className:"mb-4 pb-3 border-bottom",children:e.jsxs("div",{className:"d-flex justify-content-between align-items-start",children:[e.jsxs("div",{children:[e.jsx(c,{className:"fw-semibold mb-1",children:s("settingsPage.online.isVerified")}),e.jsx("p",{className:"text-medium-emphasis small mb-0",children:s("settingsPage.online.isVerifiedDescription")})]}),e.jsx(S,{id:"isVerified",checked:a.is_verified||!1,onChange:i=>n("is_verified",i.target.checked),size:"lg",disabled:!0})]})}),e.jsx("div",{className:"mb-3",children:e.jsxs("div",{className:"d-flex justify-content-between align-items-start",children:[e.jsxs("div",{children:[e.jsx(c,{className:"fw-semibold mb-1",children:s("settingsPage.online.isFeatured")}),e.jsx("p",{className:"text-medium-emphasis small mb-0",children:s("settingsPage.online.isFeaturedDescription")})]}),e.jsx(S,{id:"isFeatured",checked:a.is_featured||!1,onChange:i=>n("is_featured",i.target.checked),size:"lg",disabled:!0})]})})]})]})};W.propTypes={formData:r.object.isRequired,onChange:r.func.isRequired};const y=Object.freeze({GENERAL:"general",LOCATION:"location",HOURS:"hours",POLICIES:"policies",REGIONAL:"regional",BRANDING:"branding",ONLINE:"online"}),ve=()=>{const{business:a}=Y(),{t:l}=P();ee({pageType:se.SETTINGS});const[s,n]=b.useState(y.HOURS),[i,d]=b.useState({}),[j,t]=b.useState(!0),[v,o]=b.useState(!1),[u,h]=b.useState(null),[O,p]=b.useState(!1);b.useEffect(()=>{k()},[a==null?void 0:a.id]);const k=async()=>{if(a!=null&&a.id){t(!0),h(null);try{const{data:g,error:V}=await K(a.id);if(V){h(l("settingsPage.messages.loadError"));return}d(g||{})}catch(g){h(l("settingsPage.messages.loadError")),console.error("Error loading settings:",g)}finally{t(!1)}}},R=async()=>{if(a!=null&&a.id){o(!0),h(null),p(!1);try{const{error:g}=await Z(a.id,i);if(g){h(l("settingsPage.messages.saveError"));return}p(!0),setTimeout(()=>p(!1),3e3)}catch(g){h(l("settingsPage.messages.saveError")),console.error("Error saving settings:",g)}finally{o(!1)}}},E=g=>{n(g)},T=g=>{d(g)},$=()=>{const g={formData:i,onChange:T};switch(s){case y.GENERAL:return e.jsx(A,{...g});case y.LOCATION:return e.jsx(z,{...g});case y.HOURS:return e.jsx(G,{...g});case y.POLICIES:return e.jsx(H,{...g});case y.REGIONAL:return e.jsx(U,{...g});case y.BRANDING:return e.jsx(M,{...g});case y.ONLINE:return e.jsx(W,{...g});default:return e.jsx(A,{...g})}};return j?e.jsx("div",{className:"d-flex justify-content-center align-items-center",style:{minHeight:"400px"},children:e.jsx(I,{color:"primary"})}):e.jsx("div",{className:"business-settings-page",children:e.jsxs(ie,{className:"mb-4",children:[e.jsx(le,{children:e.jsx("h3",{className:"mb-0",children:l("settingsPage.title")})}),e.jsx(ae,{className:"p-0",children:e.jsxs(N,{className:"g-0",children:[e.jsx(m,{xs:12,md:3,className:"settings-navigation-col",children:e.jsx(q,{activeSection:s,onSectionChange:E})}),e.jsx(m,{xs:12,md:9,className:"settings-content-col",children:e.jsxs("div",{className:"settings-content",children:[u&&e.jsx(L,{color:"danger",dismissible:!0,onClose:()=>h(null),children:u}),O&&e.jsx(L,{color:"success",dismissible:!0,onClose:()=>p(!1),children:l("settingsPage.messages.saveSuccess")}),e.jsx("div",{className:"settings-section-content",children:$()}),e.jsxs("div",{className:"settings-actions",children:[e.jsx(C,{color:"primary",onClick:R,disabled:v,children:v?e.jsxs(e.Fragment,{children:[e.jsx(I,{size:"sm",className:"me-2"}),l("settingsPage.actions.saving")]}):l("settingsPage.actions.save")}),e.jsx(C,{color:"secondary",variant:"outline",onClick:k,disabled:v,className:"ms-2",children:l("settingsPage.actions.reset")})]})]})})]})})]})})};export{ve as default};
